{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "$id": "invoice.json",
    "title": "Invoice",
    "description": "an invoice",
    "type": "object",
    "properties": {
        "id": {
            "description": "Unique ID for invoice generated by the system but not currently displayed in the user interface.",
            "type": "string",
            "readOnly": true
        },
        "externalInvoiceId": {
            "description": "Alphanumeric string representing an external financial systemâ€™s ID for a specific invoice in Acquisitions.",
            "type": "string",
            "maxLength": 50
        },
        "paymentReferenceId": {
            "description": "Alphanumeric string representing the payment transaction ID (e.g. check number or bank transfer number) for an invoice. This value is often entered based on information from the institution's financial system.",
            "type": "string",
            "maxLength": 20
        },
        "invoiceNumber": {
            "description": "Identifier generated by the system and used by the WorldShare Platform to uniquely identify an invoice (e.g. INV-2014-1) .",
            "type": "string",
            "readOnly": true
        },
        "vendorInvoiceNumber": {
            "description": "Identifier provided by a vendor for an invoice. Number must be unique for a specific Vendor, Institution, and Invoice Date.",
            "type": "string",
            "readOnly": true
        },
        "registryId": {
            "description": "WorldCat registry id of the institution to which the invoice belongs.",
            "type": "number",
            "readOnly": true
        },
        "vendor": {
            "description": "The commercial entity from which the library orders and receives materials.",
            "$ref": "vendor.json",
            "readOnly": true
        },
        "invoiceDate": {
            "description": "The date a vendor issued an invoice to the institution.",
            "type": "string",
            "format": "date",
            "readOnly": true
        },
        "dateCreated": {
            "description": "Date/time the invoice was created.",
            "type": "string",
            "format": "date-time",
            "readOnly": true
        },
        "paymentDate": {
            "description": "The date the user indicated an invoice was paid.  May be different from date that status of invoice changed to paid.  Can be used to represent date payment was actually submitted to the vendor.",
            "type": "string",
            "format": "date",
            "writeOnly": true
        },
        "taxHandling": {
            "description": "The method by which the tax of an item is calculated.  Determines primarily whether service and shipping charges are included with the unit price when calculating the tax amount.",
            "type": "string",
            "readOnly": true
        },
        "invoiceCurrency": {
            "description": "Unit of monetary currency used for an invoice (e.g., Canadian dollars).  If the invoice currency is different than the currency of the institution, funds will be expended using the amount of the invoice item multiplied by the invoice exchange rate.  The invoice currency applies to all items on an invoice.",
            "type": "string",
            "readOnly": true
        },
        "note": {
            "description": "Text entered by the user commenting on an invoice.",
            "type": "string",
            "readOnly": true
        },
        "exchangeRate": {
            "$ref": "exchange-rate.json"
        },
        "institutionInvoiceTotal": {
            "description": "Monetary amount equalling the sum or total of all items on an invoice in the currency of the institution.",
            "$ref": "immutable-monetary-amount.json"
        },
        "vendorInvoiceTotal": {
            "description": "Monetary amount equalling the sum or total of all items on an invoice in the currency of the invoice.",
            "$ref": "immutable-monetary-amount.json"
        },
        "discountTotal": {
            "description": "Monetary amount equalling the sum or total of all the discounts for all the items on an invoice in the currency of the invoice.",
            "$ref": "immutable-monetary-amount.json"
        },
        "taxTotal": {
            "description": "Monetary amount equalling the sum or total of all the taxes for all the items on an invoice in the currency of the invoice.",
            "$ref": "immutable-monetary-amount.json"
        },
        "serviceChargesTotal": {
            "description": "Monetary amount equalling the sum or total of all the service charges for all the items on an invoice in the currency of the invoice.",
            "$ref": "immutable-monetary-amount.json"
        },
        "shippingTotal": {
            "description": "Monetary amount equalling the sum or total of all the shipping amounts for all the items on an invoice in the currency of the invoice.",
            "$ref": "immutable-monetary-amount.json"
        },
        "invoiceItems": {
            "description": "All invoice items on an invoice.",
            "type": "array",
            "items": {
                "anyOf": [
                    {
                        "$ref": "invoice-item.json#/definitions/creditInvoiceItem"
                    },
                    {
                        "$ref": "invoice-item.json#/definitions/debitInvoiceItem"
                    }
                ]
            },
            "uniqueItems": true,
            "additionalItems": false
        }
    },
    "additionalProperties": false,
    "required": []
}
