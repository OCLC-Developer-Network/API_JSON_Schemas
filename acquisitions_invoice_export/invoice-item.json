{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "$id": "invoice-item.json",
    "title": "InvoiceItem",
    "description": "Individual line-item on an invoice.",
    "type": "object",
    "definitions": {
        "creditInvoiceItem": {
            "description": "Individual line-item on an invoice that represents a credit or a refund to the institution.",
            "type": "object",
            "properties": {
                "transactionType": {
                    "description": "A category representing whether an item reduces money on the budget (debit) or increases money on the budget (credit).",
                    "type": "string",
                    "const": "CREDIT",
                    "readOnly": true
                },
                "transactionTypeDetail": {
                    "description": "The specific type of transaction for a credit item.  For example, whether the vendor simply provided a credit for future purchases or actually refunded the money to the institution.",
                    "type": "string",
                    "enum": [
                        "CREDIT",
                        "REFUND"
                    ],
                    "readOnly": true
                },
                "total": {
                    "description": "Total cost of an invoice line item.",
                    "type": "object",
                    "properties": {
                        "amount": {
                            "description": "Amount of total for invoice line item.",
                            "type": "number",
                            "minimum": -99999999999999999.99,
                            "maximum": 0.00
                        },
                        "currency": {
                            "description": "Currency (ISO code) used for invoice line item total.",
                            "type": "string",
                            "readOnly": true
                        }
                    }
                }
            },
            "allOf": [
                {
                    "$ref": "baseInvoiceItem"
                }
            ],
            "required": []
        },
        "debitInvoiceItem": {
            "description": "Individual line-item on an invoice that represents a debit to the institution.",
            "type": "object",
            "properties": {
                "transactionType": {
                    "description": "A category representing whether an item reduces money on the budget (debit) or increases money on the budget (credit).",
                    "type": "string",
                    "const": "DEBIT",
                    "readOnly": true
                },
                "transactionTypeDetail": {
                    "description": "The specific type of transaction for a debit item.  For example, whether the invoice item fully pays for an item, partially pays for an item, or is a supplemental payment for an item.",
                    "type": "string",
                    "enum": [
                        "DEBIT",
                        "DEBIT_PARTIAL",
                        "SUPPLEMENTAL"
                    ],
                    "readOnly": true
                },
                "total": {
                    "description": "Total cost of an invoice line item.",
                    "type": "object",
                    "properties": {
                        "amount": {
                            "description": "Amount of total for invoice line item.",
                            "type": "number",
                            "minimum": 0.00,
                            "maximum": 99999999999999999.99
                        },
                        "currency": {
                            "description": "Currency (ISO code) used for invoice line item total.",
                            "type": "string",
                            "readOnly": true
                        }
                    }
                }
            },
            "allOf": [
                {
                    "$ref": "baseInvoiceItem"
                }
            ],
            "required": []
        },
        "baseInvoiceItem": {
            "$id": "baseInvoiceItem",
            "description": "Individual line-item on an invoice that represents a debit, credit, refund or supplement.",
            "type": "object",
            "properties": {
                "id": {
                    "description": "Unique ID for invoice generated by the system.",
                    "type": "string",
                    "readOnly": true
                },
                "invoiceItemNumber": {
                    "description": "Identifier for an invoice item automatically generated by the system and unique for that institution across all vendors.",
                    "type": "string",
                    "readOnly": true
                },
                "resource": {
                    "oneOf": [
                        {
                            "$ref": "resource.json#/definitions/worldCatResource"
                        },
                        {
                            "$ref": "resource.json#/definitions/kbwcEntryResource"
                        },
                        {
                            "$ref": "resource.json#/definitions/kbwcCollectionResource"
                        },
                        {
                            "$ref": "resource.json#/definitions/localResource"
                        }
                    ]
                },
                "orderItem": {
                    "$ref": "order-item.json",
                    "readOnly": true
                },
                "invoicingPercentage": {
                    "description": "Percentage of the original order item that is being invoiced on an invoice item. For instance, if the vendor were invoicing the institution in quarterly installments, the invoice percentage would be 25% for each installment.",
                    "type": "number",
                    "readOnly": true
                },
                "funds": {
                    "description": "The funds selected by the user for an invoice line item.",
                    "type": "array",
                    "items": {
                        "$ref": "fund.json"
                    },
                    "uniqueItems": true
                },
                "quantity": {
                    "description": "Integer representing the number of units or copies of an invoice item.",
                    "type": "number",
                    "readOnly": true
                },
                "unitPrice": {
                    "description": "Monetary amount representing the base price of a single unit of a line-item before any discounts, service charges, shipping costs, or taxes are applied.",
                    "$ref": "immutable-monetary-amount.json"
                },
                "discountPercentage": {
                    "description": "The percentage deducted from the retail price for a specific item.",
                    "type": "number",
                    "readOnly": true
                },
                "discountTotal": {
                    "description": "Monetary amount deducted from the retail price for a specific item.",
                    "$ref": "immutable-monetary-amount.json"
                },
                "serviceCharge": {
                    "description": "Monetary amount indicating the service charges to be paid to a vendor for a single unit of an Item on an invoice.  Entered by the user or calculated by dividing the invoice item services charge amount (item level) by the invoice item quantity.",
                    "$ref": "immutable-monetary-amount.json"
                },
                "serviceChargeTotal": {
                    "description": "Monetary amount indicating the service charges to be paid to a vendor for the entire invoice line item.",
                    "$ref": "immutable-monetary-amount.json"
                },
                "shippingCharge": {
                    "description": "Monetary amount indicating the shipping to be paid to a vendor for a single unit of an item on an invoice.  Entered by the user or calculated by dividing the invoice item shipping amount (item level) by the invoice quantity.",
                    "$ref": "immutable-monetary-amount.json"
                },
                "shippingChargeTotal": {
                    "description": "Monetary amount indicating the shipping to be paid to a vendor for for the entire invoice line item.",
                    "$ref": "immutable-monetary-amount.json"
                },
                "tax1Percentage": {
                    "description": "A percentage value (of up to 3 decimal places) entered by the user and indicating the tax 1 of the item. This value is multiplied by the price to calculate the tax amount.",
                    "type": "number",
                    "readOnly": true
                },
                "tax1Total": {
                    "description": "Monetary amount charged for the primary tax for a single invoice line item.",
                    "$ref": "immutable-monetary-amount.json"
                },
                "tax2Percentage": {
                    "description": "A percentage value (of up to 3 decimal places) entered by the user and indicating the tax 2 of the item. This value is multiplied by the price to calculate the tax amount.",
                    "type": "number",
                    "readOnly": true
                },
                "tax2Total": {
                    "description": "Monetary amount charged for the tax 2 for a single invoice line item.",
                    "$ref": "immutable-monetary-amount.json"
                },
                "taxTotal": {
                    "description": "Monetary amount equalling the sum or total of all taxes for an invoice line item.",
                    "$ref": "immutable-monetary-amount.json"
                },
                "calculatedTotal": {
                    "description": "Total invoice line item amount as calculated by the system.",
                    "$ref": "immutable-monetary-amount.json"
                },
                "adjustmentAmount": {
                    "description": "Monetary amount representing a user-entered adjustment from the calculated total.",
                    "$ref": "immutable-monetary-amount.json"
                },
                "customFields": {
                    "description": "Custom user-configured fields for an invoice item.",
                    "type": "array",
                    "items": {
                        "anyOf": [
                            {
                                "$ref": "custom-field.json#/definitions/dateField"
                            },
                            {
                                "$ref": "custom-field.json#/definitions/textField"
                            },
                            {
                                "$ref": "custom-field.json#/definitions/numberField"
                            },
                            {
                                "$ref": "custom-field.json#/definitions/selectField"
                            },
                            {
                                "$ref": "custom-field.json#/definitions/mutiSelectField"
                            }
                        ]
                    },
                    "uniqueItems": true,
                    "additionalItems": false
                }
            }
        }
    },
    "required": []
}
